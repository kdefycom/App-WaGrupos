
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enviar Grupo - KDefy</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%23f0f0f0'/><text x='50' y='78' font-size='80' font-family='-apple-system,BlinkMacSystemFont,sans-serif' font-weight='bold' text-anchor='middle' fill='%23000000'>K</text></svg>">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Enviar Grupo - Kdefy Grupos",
  "url": "https://app.kdefy.com/enviar-grupo/",
  "description": "Envie seu grupo de WhatsApp, Telegram, Canal do WhatsApp ou Instagram para ser listado no Kdefy Grupos.",
  "inLanguage": "pt-BR",
  "publisher": {
    "@type": "Organization",
    "name": "Kdefy",
    "url": "https://app.kdefy.com",
    "logo": {
      "@type": "ImageObject",
      "url": "https://app.kdefy.com/favicon.svg"
    }
  }
}
</script>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>â• Enviar Grupo</h1>
      <p class="subtitle">Compartilhe seu link com a comunidade</p>

      <!-- Step 1: Escolher Tipo -->
      <div id="step1" class="step active">
        <label>Escolha o tipo do seu link:</label>
        <div class="tipo-grid">
          <button class="tipo-btn whatsapp" onclick="escolherTipo('whatsapp')">
            ğŸ“±<br>Grupo de WhatsApp
          </button>
          <button class="tipo-btn telegram" onclick="escolherTipo('telegram')">
            âœˆï¸<br>Grupo de Telegram
          </button>
          <button class="tipo-btn canal_whatsapp" onclick="escolherTipo('canal_whatsapp')">
            ğŸ“¢<br>Canal do WhatsApp
          </button>
          <button class="tipo-btn instagram" onclick="escolherTipo('instagram')">
            ğŸ“¸<br>Grupo do Instagram
          </button>
        </div>
        <a href="/" class="btn btn-back">â† Voltar</a>
      </div>

      <!-- Step 2: Validar Link -->
      <div id="step2" class="step">
        <div id="alert"></div>
        <label>Cole o link do seu <span id="tipoTexto"></span>:</label>
        <input type="url" id="linkInput" placeholder="https://">
        <button class="btn btn-primary" onclick="validarLink()">Validar Link</button>
        <button class="btn btn-back" onclick="voltarStep(1)">â† Voltar</button>
      </div>

      <!-- Step 3: Preview e Detalhes -->
      <div id="step3" class="step">
        <h2>ğŸ“ Detalhes do Grupo</h2>
        
        <img id="previewImg" class="preview-img" src="https://via.placeholder.com/300" alt="Preview">
        
        <div class="upload-area" onclick="document.getElementById('fotoUpload').click()">
          <p>ğŸ“· Clique para alterar a foto</p>
          <input type="file" id="fotoUpload" accept="image/*" onchange="alterarFoto()">
        </div>

        <label>Nome do Grupo *</label>
        <input type="text" id="nomeInput" placeholder="Ex: Grupo de Amigos" required>

        <label>DescriÃ§Ã£o/Bio do Grupo</label>
        <textarea id="descInput" placeholder="Fale sobre o grupo..."></textarea>

        <label>Categoria *</label>
        <select id="categoriaSelect"></select>

        <label>Regras do Grupo</label>
        <div class="regras-grid" id="regrasGrid"></div>

        <label>Seu Email *</label>
        <input type="email" id="emailInput" placeholder="seu@email.com" required>

        <button id="enviarBtn" class="btn btn-secondary" onclick="enviarGrupo()">Enviar para AnÃ¡lise</button>
        <button class="btn btn-back" onclick="voltarStep(2)">â† Voltar</button>
      </div>
    </div>
  </div>

  <script src="/app.js"></script>
  <script>
    const { createClient } = supabase;
    const supabase_client = createClient(SUPABASE_URL, SUPABASE_KEY);
  </script>
  <script src="script.js"></script>
</body>
</html>
